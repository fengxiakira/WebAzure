Last login: Tue May  4 18:25:41 on ttys001
 

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan               1 ↵  1086  20:52:58

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_availability_set.main will be created
  + resource "azurerm_availability_set" "main" {
      + id                           = (known after apply)
      + location                     = "eastus"
      + managed                      = true
      + name                         = "WebAzureProject-Terraform-VMset"
      + platform_fault_domain_count  = 3
      + platform_update_domain_count = 5
      + resource_group_name          = "WebAzureProject-Terraform"
      + tags                         = {
          + "environment" = "Production"
        }
    }

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = (known after apply)
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "WebAzureProject-Terraform-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + tags                            = {
          + "environment" = "staging"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "UbuntuServer"
          + publisher = "Canonical"
          + sku       = "18.04-LTS"
          + version   = "latest"
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "WebAzureProject-Terraform-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + tags                            = {
          + "environment" = "staging"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "UbuntuServer"
          + publisher = "Canonical"
          + sku       = "18.04-LTS"
          + version   = "latest"
        }
    }

  # azurerm_managed_disk.main[0] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "environment" = "staging"
        }
    }

  # azurerm_managed_disk.main[1] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "environment" = "staging"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_security_group.main will be created
  + resource "azurerm_network_security_group" "main" {
      + id                  = (known after apply)
      + location            = "eastus"
      + name                = "WebAzureProject-Terraform-network-security_group"
      + resource_group_name = "WebAzureProject-Terraform"
      + security_rule       = (known after apply)
      + tags                = {
          + "environment" = "VirtualNetwork"
        }
    }

  # azurerm_network_security_rule.rule1 will be created
  + resource "azurerm_network_security_rule" "rule1" {
      + access                      = "Allow"
      + description                 = "Allow access to other VMs on the subnet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "3389"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-allowVM"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 100
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_network_security_rule.rule2 will be created
  + resource "azurerm_network_security_rule" "rule2" {
      + access                      = "Deny"
      + description                 = "Deny direct access from the internet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "22"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-denyDirectAccess"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 101
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_public_ip.main will be created
  + resource "azurerm_public_ip" "main" {
      + allocation_method       = "Static"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "eastus"
      + name                    = "WebAzureProject-Terraform-PublicIp1"
      + resource_group_name     = "WebAzureProject-Terraform"
      + sku                     = "Basic"
      + tags                    = {
          + "environment" = "Production"
        }
    }

  # azurerm_resource_group.main will be created
  + resource "azurerm_resource_group" "main" {
      + id       = (known after apply)
      + location = "eastus"
      + name     = "WebAzureProject-Terraform"
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + vm_protection_enabled = false
    }

Plan: 20 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 71, in resource "azurerm_lb_backend_address_pool" "main":
  71: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan"                   ✔  1086  20:53:52
azurerm_resource_group.main: Creating...
azurerm_resource_group.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_network_security_group.main: Creating...
azurerm_virtual_network.main: Creating...
azurerm_availability_set.main: Creating...
azurerm_public_ip.main: Creating...
azurerm_managed_disk.main[1]: Creating...
azurerm_managed_disk.main[0]: Creating...

Error: Error Creating/Updating Public IP "WebAzureProject-Terraform-PublicIp1" (Resource Group "WebAzureProject-Terraform"): network.PublicIPAddressesClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-PublicIp1' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-PublicIp1" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 19, in resource "azurerm_public_ip" "main":
  19: resource "azurerm_public_ip" "main" {



Error: Error Creating/Updating Virtual Network "WebAzureProject-Terraform-network" (Resource Group "WebAzureProject-Terraform"): network.VirtualNetworksClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-network' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-network" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 30, in resource "azurerm_virtual_network" "main":
  30: resource "azurerm_virtual_network" "main" {



Error: Error creating/updating NSG "WebAzureProject-Terraform-network-security_group" (Resource Group "WebAzureProject-Terraform"): network.SecurityGroupsClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-network-security_group' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-network-security_group" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 87, in resource "azurerm_network_security_group" "main":
  87: resource "azurerm_network_security_group" "main" {



Error: compute.AvailabilitySetsClient#CreateOrUpdate: Failure responding to request: StatusCode=403 -- Original Error: autorest/azure: Service returned an error. Status=403 Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-VMset' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-VMset" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 138, in resource "azurerm_availability_set" "main":
 138: resource "azurerm_availability_set" "main" {



Error: Error creating/updating Managed Disk "WebAzureProject-Terraform-ManagedDisks" (Resource Group "WebAzureProject-Terraform"): compute.DisksClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-ManagedDisks' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-ManagedDisks" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 147, in resource "azurerm_managed_disk" "main":
 147: resource "azurerm_managed_disk" "main" {



Error: Error creating/updating Managed Disk "WebAzureProject-Terraform-ManagedDisks" (Resource Group "WebAzureProject-Terraform"): compute.DisksClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-ManagedDisks' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-ManagedDisks" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 147, in resource "azurerm_managed_disk" "main":
 147: resource "azurerm_managed_disk" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az tags show                                     1 ↵  1087  20:55:45
'tags' is misspelled or not recognized by the system.
Did you mean 'tag' ?

TRY THIS:
az tag list
List the entire set of tags on a specific resource. (autogenerated)

https://docs.microsoft.com/en-US/cli/azure/tag#az_tag_list
Read more about the command in reference docs
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az tag -h                                        2 ↵  1088  21:04:41

Group
    az tag : Tag Management on a resource.

Commands:
    add-value    : Create a tag value.
    create       : Create tags on a specific resource.
    delete       : Delete tags on a specific resource.
    list         : List the entire set of tags on a specific resource.
    remove-value : Deletes a predefined tag value for a predefined tag name.
    update       : Selectively update the set of tags on a specific resource.

For more specific examples, use: az find "az tag"

Please let us know how we are doing: https://aka.ms/azureclihats
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az tag list                                        ✔  1089  21:04:47
[
  {
    "count": {
      "type": "Total",
      "value": 1
    },
    "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/tagNames/ms-resource-usage",
    "tagName": "ms-resource-usage",
    "values": [
      {
        "count": {
          "type": "Total",
          "value": 1
        },
        "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/tagNames/ms-resource-usage/tagValues/azure-cloud-shell",
        "tagValue": "azure-cloud-shell"
      }
    ]
  },
  {
    "count": {
      "type": "Total",
      "value": 2
    },
    "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/tagNames/udacity-dws",
    "tagName": "udacity-dws",
    "values": [
      {
        "count": {
          "type": "Total",
          "value": 1
        },
        "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/tagNames/udacity-dws/tagValues/123",
        "tagValue": "123"
      },
      {
        "count": {
          "type": "Total",
          "value": 1
        },
        "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/tagNames/udacity-dws/tagValues/",
        "tagValue": ""
      }
    ]
  },
  {
    "count": {
      "type": "Total",
      "value": 1
    },
    "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/tagNames/tags",
    "tagName": "tags",
    "values": [
      {
        "count": {
          "type": "Total",
          "value": 1
        },
        "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/tagNames/tags/tagValues/udacity-dws",
        "tagValue": "udacity-dws"
      }
    ]
  }
]
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az tag show                                        ✔  1090  21:04:53
'show' is misspelled or not recognized by the system.

TRY THIS:
https://aka.ms/cli_ref
Read more about the command in reference docs
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan                2 ↵  1091  21:06:00
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_availability_set.main will be created
  + resource "azurerm_availability_set" "main" {
      + id                           = (known after apply)
      + location                     = "eastus"
      + managed                      = true
      + name                         = "WebAzureProject-Terraform-VMset"
      + platform_fault_domain_count  = 3
      + platform_update_domain_count = 5
      + resource_group_name          = "WebAzureProject-Terraform"
      + tags                         = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = (known after apply)
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "WebAzureProject-Terraform-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + tags                            = {
          + "udacity-dws" = "staging"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "UbuntuServer"
          + publisher = "Canonical"
          + sku       = "18.04-LTS"
          + version   = "latest"
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "WebAzureProject-Terraform-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + tags                            = {
          + "udacity-dws" = "staging"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "UbuntuServer"
          + publisher = "Canonical"
          + sku       = "18.04-LTS"
          + version   = "latest"
        }
    }

  # azurerm_managed_disk.main[0] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_managed_disk.main[1] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_security_group.main will be created
  + resource "azurerm_network_security_group" "main" {
      + id                  = (known after apply)
      + location            = "eastus"
      + name                = "WebAzureProject-Terraform-network-security_group"
      + resource_group_name = "WebAzureProject-Terraform"
      + security_rule       = (known after apply)
      + tags                = {
          + "udacity-dws" = "VirtualNetwork"
        }
    }

  # azurerm_network_security_rule.rule1 will be created
  + resource "azurerm_network_security_rule" "rule1" {
      + access                      = "Allow"
      + description                 = "Allow access to other VMs on the subnet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "3389"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-allowVM"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 100
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_network_security_rule.rule2 will be created
  + resource "azurerm_network_security_rule" "rule2" {
      + access                      = "Deny"
      + description                 = "Deny direct access from the internet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "22"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-denyDirectAccess"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 101
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_public_ip.main will be created
  + resource "azurerm_public_ip" "main" {
      + allocation_method       = "Static"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "eastus"
      + name                    = "WebAzureProject-Terraform-PublicIp1"
      + resource_group_name     = "WebAzureProject-Terraform"
      + sku                     = "Basic"
      + tags                    = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + vm_protection_enabled = false
    }

Plan: 19 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 71, in resource "azurerm_lb_backend_address_pool" "main":
  71: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan"                    ✔  1092  21:11:39
azurerm_network_security_group.main: Creating...
azurerm_managed_disk.main[1]: Creating...
azurerm_availability_set.main: Creating...
azurerm_virtual_network.main: Creating...
azurerm_managed_disk.main[0]: Creating...
azurerm_public_ip.main: Creating...
azurerm_availability_set.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_lb.main: Creating...
azurerm_managed_disk.main[0]: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/WebAzureProject-Terraform-ManagedDisks]
azurerm_managed_disk.main[1]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/WebAzureProject-Terraform-ManagedDisks]
azurerm_network_security_group.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_network_security_rule.rule2: Creating...
azurerm_network_security_rule.rule1: Creating...
azurerm_network_security_rule.rule2: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Creation complete after 11s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_network_security_rule.rule2: Still creating... [20s elapsed]
azurerm_network_security_rule.rule2: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]

Error: Error Creating/Updating Virtual Network "WebAzureProject-Terraform-network" (Resource Group "WebAzureProject-Terraform"): network.VirtualNetworksClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-network' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-network" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 30, in resource "azurerm_virtual_network" "main":
  30: resource "azurerm_virtual_network" "main" {



Error: creating/updating Load Balancer "WebAzureProject-Terraform-LoadBalancer" (Resource Group "WebAzureProject-Terraform"): network.LoadBalancersClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-LoadBalancer' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-LoadBalancer" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 59, in resource "azurerm_lb" "main":
  59: resource "azurerm_lb" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan                1 ↵  1093  21:12:27
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/WebAzureProject-Terraform-ManagedDisks]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/WebAzureProject-Terraform-ManagedDisks]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"
      + tags                 = {
          + "udacity-dws" = "Production"
        }

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1"
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "WebAzureProject-Terraform-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + tags                            = {
          + "udacity-dws" = "staging"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "UbuntuServer"
          + publisher = "Canonical"
          + sku       = "18.04-LTS"
          + version   = "latest"
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "WebAzureProject-Terraform-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + tags                            = {
          + "udacity-dws" = "staging"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "UbuntuServer"
          + publisher = "Canonical"
          + sku       = "18.04-LTS"
          + version   = "latest"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group"
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group"
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + tags                  = {
          + "udacity-dws" = "Production"
        }
      + vm_protection_enabled = false
    }

Plan: 12 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 79, in resource "azurerm_lb_backend_address_pool" "main":
  79: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan"                    ✔  1094  21:13:56
azurerm_virtual_network.main: Creating...
azurerm_lb.main: Creating...
azurerm_lb.main: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_lb_backend_address_pool.main: Creating...
azurerm_lb_backend_address_pool.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_virtual_network.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_subnet.main: Creating...
azurerm_subnet.main: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet_network_security_group_association.main[1]: Creating...
azurerm_subnet_network_security_group_association.main[0]: Creating...
azurerm_network_interface.main[1]: Creating...
azurerm_network_interface.main[0]: Creating...
azurerm_subnet_network_security_group_association.main[0]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]

Error: Error creating Network Interface "WebAzureProject-Terraform-nic" (Resource Group "WebAzureProject-Terraform"): network.InterfacesClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-nic' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-nic" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 50, in resource "azurerm_network_interface" "main":
  50: resource "azurerm_network_interface" "main" {



Error: Error creating Network Interface "WebAzureProject-Terraform-nic" (Resource Group "WebAzureProject-Terraform"): network.InterfacesClient#CreateOrUpdate: Failure sending request: StatusCode=403 -- Original Error: Code="RequestDisallowedByPolicy" Message="Resource 'WebAzureProject-Terraform-nic' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="WebAzureProject-Terraform-nic" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 50, in resource "azurerm_network_interface" "main":
  50: resource "azurerm_network_interface" "main" {



Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_subnet_network_security_group_association" for more information.

  on main.tf line 139, in resource "azurerm_subnet_network_security_group_association" "main":
 139: resource "azurerm_subnet_network_security_group_association" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/WebAzureProject-Terraform-ManagedDisks]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/WebAzureProject-Terraform-ManagedDisks]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_subnet.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "WebAzureProject-Terraform-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + tags                            = {
          + "udacity-dws" = "staging"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "UbuntuServer"
          + publisher = "Canonical"
          + sku       = "18.04-LTS"
          + version   = "latest"
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "WebAzureProject-Terraform-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + tags                            = {
          + "udacity-dws" = "staging"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "UbuntuServer"
          + publisher = "Canonical"
          + sku       = "18.04-LTS"
          + version   = "latest"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet"
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet"
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool"
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool"
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group"
      + subnet_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet"
    }

Plan: 7 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 83, in resource "azurerm_lb_backend_address_pool" "main":
  83: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 83, in resource "azurerm_lb_backend_address_pool" "main":
  83: resource "azurerm_lb_backend_address_pool" "main" {



Error: Unsupported argument

  on main.tf line 193, in resource "azurerm_linux_virtual_machine" "main":
 193:     create_option  = "FromImage"

An argument named "create_option" is not expected here.


Error: Missing resource instance key

  on main.tf line 202, in resource "azurerm_virtual_machine_data_disk_attachment" "example":
 202:   managed_disk_id    = azurerm_managed_disk.main.id

Because azurerm_managed_disk.main has "count" set, its attributes must be
accessed on specific instances.

For example, to correlate with indices of a referring resource, use:
    azurerm_managed_disk.main[count.index]


Error: Reference to undeclared resource

  on main.tf line 203, in resource "azurerm_virtual_machine_data_disk_attachment" "example":
 203:   virtual_machine_id = azurerm_virtual_machine.main.id

A managed resource "azurerm_virtual_machine" "main" has not been declared in
the root module.

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 83, in resource "azurerm_lb_backend_address_pool" "main":
  83: resource "azurerm_lb_backend_address_pool" "main" {



Error: Reference to undeclared resource

  on main.tf line 203, in resource "azurerm_virtual_machine_data_disk_attachment" "example":
 203:   virtual_machine_id = azurerm_virtual_machine.main[ count.index].id

A managed resource "azurerm_virtual_machine" "main" has not been declared in
the root module.

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 83, in resource "azurerm_lb_backend_address_pool" "main":
  83: resource "azurerm_lb_backend_address_pool" "main" {



Error: Unsupported argument

  on main.tf line 206, in resource "azurerm_virtual_machine_data_disk_attachment" "example":
 206:   tags = {

An argument named "tags" is not expected here.

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/WebAzureProject-Terraform-ManagedDisks]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/WebAzureProject-Terraform-ManagedDisks]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_subnet.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet_network_security_group_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_availability_set.main will be created
  + resource "azurerm_availability_set" "main" {
      + id                           = (known after apply)
      + location                     = "eastus"
      + managed                      = true
      + name                         = "WebAzureProject-Terraform-VMset"
      + platform_fault_domain_count  = 3
      + platform_update_domain_count = 5
      + resource_group_name          = "WebAzureProject-Terraform"
      + tags                         = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"
      + tags                 = {
          + "udacity-dws" = "Production"
        }

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = (known after apply)
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "1-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "2-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_managed_disk.main[0] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "1-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_managed_disk.main[1] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "2-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_security_group.main will be created
  + resource "azurerm_network_security_group" "main" {
      + id                  = (known after apply)
      + location            = "eastus"
      + name                = "WebAzureProject-Terraform-network-security_group"
      + resource_group_name = "WebAzureProject-Terraform"
      + security_rule       = (known after apply)
      + tags                = {
          + "udacity-dws" = "VirtualNetwork"
        }
    }

  # azurerm_network_security_rule.rule1 will be created
  + resource "azurerm_network_security_rule" "rule1" {
      + access                      = "Allow"
      + description                 = "Allow access to other VMs on the subnet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "3389"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-allowVM"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 101
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_network_security_rule.rule2 will be created
  + resource "azurerm_network_security_rule" "rule2" {
      + access                      = "Deny"
      + description                 = "Deny direct access from the internet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "22"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-denyDirectAccess"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 100
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_public_ip.main will be created
  + resource "azurerm_public_ip" "main" {
      + allocation_method       = "Static"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "eastus"
      + name                    = "WebAzureProject-Terraform-PublicIp1"
      + resource_group_name     = "WebAzureProject-Terraform"
      + sku                     = "Basic"
      + tags                    = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_resource_group.main will be created
  + resource "azurerm_resource_group" "main" {
      + id       = (known after apply)
      + location = "eastus"
      + name     = "WebAzureProject-Terraform"
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_machine_data_disk_attachment.example[0] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_machine_data_disk_attachment.example[1] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + tags                  = {
          + "udacity-dws" = "Production"
        }
      + vm_protection_enabled = false
    }

Plan: 22 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 83, in resource "azurerm_lb_backend_address_pool" "main":
  83: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan"
azurerm_resource_group.main: Creating...
azurerm_resource_group.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_network_security_group.main: Creating...
azurerm_availability_set.main: Creating...
azurerm_managed_disk.main[1]: Creating...
azurerm_virtual_network.main: Creating...
azurerm_public_ip.main: Creating...
azurerm_managed_disk.main[0]: Creating...
azurerm_availability_set.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_lb.main: Creating...
azurerm_managed_disk.main[1]: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_managed_disk.main[0]: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_virtual_network.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_subnet.main: Creating...
azurerm_network_security_group.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_network_security_rule.rule1: Creating...
azurerm_network_security_rule.rule2: Creating...
azurerm_lb.main: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_lb_backend_address_pool.main: Creating...
azurerm_lb_backend_address_pool.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet.main: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet_network_security_group_association.main[1]: Creating...
azurerm_subnet_network_security_group_association.main[0]: Creating...
azurerm_network_interface.main[1]: Creating...
azurerm_network_interface.main[0]: Creating...
azurerm_network_interface.main[1]: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface.main[0]: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface_backend_address_pool_association.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creating...
azurerm_linux_virtual_machine.main[1]: Creating...
azurerm_linux_virtual_machine.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_security_rule.rule2: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Still creating... [10s elapsed]
azurerm_network_security_rule.rule2: Creation complete after 10s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [10s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Still creating... [20s elapsed]
azurerm_network_security_rule.rule1: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[0]: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_linux_virtual_machine.main[0]: Still creating... [20s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [30s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [40s elapsed]
azurerm_linux_virtual_machine.main[0]: Creation complete after 46s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm]

Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_network_interface_backend_address_pool_association" for more information.

  on main.tf line 90, in resource "azurerm_network_interface_backend_address_pool_association" "main":
  90: resource "azurerm_network_interface_backend_address_pool_association" "main" {



Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_subnet_network_security_group_association" for more information.

  on main.tf line 143, in resource "azurerm_subnet_network_security_group_association" "main":
 143: resource "azurerm_subnet_network_security_group_association" "main" {



Error: waiting for creation of Linux Virtual Machine "2-vm" (Resource Group "WebAzureProject-Terraform"): Code="NetworkingInternalOperationError" Message="An unexpected error occured while processing the network profile of the VM. Please retry later."

  on main.tf line 173, in resource "azurerm_linux_virtual_machine" "main":
 173: resource "azurerm_linux_virtual_machine" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan"

Error: Saved plan is stale

The given plan file can no longer be applied because the state was changed by
another operation after the plan was created.

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_subnet.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet_network_security_group_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_interface.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface_backend_address_pool_association.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_linux_virtual_machine.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_availability_set.main will be created
  + resource "azurerm_availability_set" "main" {
      + id                           = (known after apply)
      + location                     = "eastus"
      + managed                      = true
      + name                         = "WebAzureProject-Terraform-VMset"
      + platform_fault_domain_count  = 3
      + platform_update_domain_count = 5
      + resource_group_name          = "WebAzureProject-Terraform"
      + tags                         = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"
      + tags                 = {
          + "udacity-dws" = "Production"
        }

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = (known after apply)
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "1-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "2-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_managed_disk.main[0] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "1-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_managed_disk.main[1] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "2-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_security_group.main will be created
  + resource "azurerm_network_security_group" "main" {
      + id                  = (known after apply)
      + location            = "eastus"
      + name                = "WebAzureProject-Terraform-network-security_group"
      + resource_group_name = "WebAzureProject-Terraform"
      + security_rule       = (known after apply)
      + tags                = {
          + "udacity-dws" = "VirtualNetwork"
        }
    }

  # azurerm_network_security_rule.rule1 will be created
  + resource "azurerm_network_security_rule" "rule1" {
      + access                      = "Allow"
      + description                 = "Allow access to other VMs on the subnet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "3389"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-allowVM"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 101
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_network_security_rule.rule2 will be created
  + resource "azurerm_network_security_rule" "rule2" {
      + access                      = "Deny"
      + description                 = "Deny direct access from the internet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "22"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-denyDirectAccess"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 100
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_public_ip.main will be created
  + resource "azurerm_public_ip" "main" {
      + allocation_method       = "Static"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "eastus"
      + name                    = "WebAzureProject-Terraform-PublicIp1"
      + resource_group_name     = "WebAzureProject-Terraform"
      + sku                     = "Basic"
      + tags                    = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_resource_group.main will be created
  + resource "azurerm_resource_group" "main" {
      + id       = (known after apply)
      + location = "eastus"
      + name     = "WebAzureProject-Terraform"
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_machine_data_disk_attachment.example[0] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_machine_data_disk_attachment.example[1] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + tags                  = {
          + "udacity-dws" = "Production"
        }
      + vm_protection_enabled = false
    }

Plan: 22 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 83, in resource "azurerm_lb_backend_address_pool" "main":
  83: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan"  
azurerm_resource_group.main: Creating...
azurerm_resource_group.main: Creation complete after 0s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_availability_set.main: Creating...
azurerm_virtual_network.main: Creating...
azurerm_managed_disk.main[0]: Creating...
azurerm_public_ip.main: Creating...
azurerm_network_security_group.main: Creating...
azurerm_managed_disk.main[1]: Creating...
azurerm_availability_set.main: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_lb.main: Creating...
azurerm_managed_disk.main[1]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_managed_disk.main[0]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_lb.main: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_lb_backend_address_pool.main: Creating...
azurerm_network_security_group.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_virtual_network.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_subnet.main: Creating...
azurerm_network_security_rule.rule2: Creating...
azurerm_network_security_rule.rule1: Creating...
azurerm_lb_backend_address_pool.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet.main: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet_network_security_group_association.main[0]: Creating...
azurerm_subnet_network_security_group_association.main[1]: Creating...
azurerm_network_interface.main[1]: Creating...
azurerm_network_interface.main[0]: Creating...
azurerm_network_interface.main[1]: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface.main[0]: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface_backend_address_pool_association.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creating...
azurerm_linux_virtual_machine.main[1]: Creating...
azurerm_linux_virtual_machine.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[0]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_security_rule.rule2: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Creation complete after 11s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [10s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [10s elapsed]
azurerm_network_security_rule.rule2: Still creating... [20s elapsed]
azurerm_network_security_rule.rule2: Creation complete after 22s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_linux_virtual_machine.main[1]: Still creating... [20s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [30s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [40s elapsed]
azurerm_linux_virtual_machine.main[1]: Creation complete after 47s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]

Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_network_interface_backend_address_pool_association" for more information.

  on main.tf line 90, in resource "azurerm_network_interface_backend_address_pool_association" "main":
  90: resource "azurerm_network_interface_backend_address_pool_association" "main" {



Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_subnet_network_security_group_association" for more information.

  on main.tf line 143, in resource "azurerm_subnet_network_security_group_association" "main":
 143: resource "azurerm_subnet_network_security_group_association" "main" {



Error: waiting for creation of Linux Virtual Machine "1-vm" (Resource Group "WebAzureProject-Terraform"): Code="NetworkingInternalOperationError" Message="An unexpected error occured while processing the network profile of the VM. Please retry later."

  on main.tf line 173, in resource "azurerm_linux_virtual_machine" "main":
 173: resource "azurerm_linux_virtual_machine" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 84, in resource "azurerm_lb_backend_address_pool" "main":
  84: resource "azurerm_lb_backend_address_pool" "main" {



Error: Reference to undeclared input variable

  on main.tf line 42, in resource "azurerm_subnet" "main":
  42:   count = var.vm_numSS

An input variable with the name "vm_numSS" has not been declared. Did you mean
"vm_num"?


Error: Missing resource instance key

  on main.tf line 59, in resource "azurerm_network_interface" "main":
  59:     subnet_id                     = azurerm_subnet.main.id

Because azurerm_subnet.main has "count" set, its attributes must be accessed
on specific instances.

For example, to correlate with indices of a referring resource, use:
    azurerm_subnet.main[count.index]


Error: Missing resource instance key

  on main.tf line 146, in resource "azurerm_subnet_network_security_group_association" "main":
 146:   subnet_id                 = azurerm_subnet.main.id

Because azurerm_subnet.main has "count" set, its attributes must be accessed
on specific instances.

For example, to correlate with indices of a referring resource, use:
    azurerm_subnet.main[count.index]

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_subnet.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_interface.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_linux_virtual_machine.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]
azurerm_network_interface_backend_address_pool_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
-/+ destroy and then create replacement

Terraform will perform the following actions:

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset"
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "1-vm"
      + network_interface_ids           = [
          + "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic",
        ]
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_network_interface.main[0] will be updated in-place
  ~ resource "azurerm_network_interface" "main" {
        id                            = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic"
        name                          = "WebAzureProject-Terraform-nic"
        tags                          = {
            "udacity-dws" = "Production"
        }
        # (11 unchanged attributes hidden)

      ~ ip_configuration {
            name                          = "internal"
          ~ subnet_id                     = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> (known after apply)
            # (4 unchanged attributes hidden)
        }
    }

  # azurerm_network_interface.main[1] will be updated in-place
  ~ resource "azurerm_network_interface" "main" {
        id                            = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic"
        name                          = "WebAzureProject-Terraform-nic"
        tags                          = {
            "udacity-dws" = "Production"
        }
        # (11 unchanged attributes hidden)

      ~ ip_configuration {
            name                          = "internal"
          ~ subnet_id                     = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> (known after apply)
            # (4 unchanged attributes hidden)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool"
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic"
    }

  # azurerm_subnet.main[0] must be replaced
-/+ resource "azurerm_subnet" "main" {
      ~ address_prefix                                 = "10.0.1.0/24" -> (known after apply)
      ~ id                                             = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> (known after apply)
      ~ name                                           = "WebAzureProject-Terraform-subnet" -> "1-subnet" # forces replacement
      - service_endpoint_policy_ids                    = [] -> null
      - service_endpoints                              = [] -> null
        # (5 unchanged attributes hidden)
    }

  # azurerm_subnet.main[1] will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "2-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group"
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] must be replaced
-/+ resource "azurerm_subnet_network_security_group_association" "main" {
      ~ id                        = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> (known after apply)
      ~ subnet_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> (known after apply) # forces replacement
        # (1 unchanged attribute hidden)
    }

  # azurerm_virtual_machine_data_disk_attachment.example[0] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks"
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_machine_data_disk_attachment.example[1] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks"
      + virtual_machine_id        = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm"
      + write_accelerator_enabled = false
    }

Plan: 8 to add, 2 to change, 2 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 84, in resource "azurerm_lb_backend_address_pool" "main":
  84: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan"  
azurerm_subnet_network_security_group_association.main[1]: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet.main[1]: Creating...
azurerm_subnet_network_security_group_association.main[1]: Destruction complete after 4s
azurerm_subnet.main[0]: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]

Error: Error deleting Subnet "WebAzureProject-Terraform-subnet" (Virtual Network "WebAzureProject-Terraform-network" / Resource Group "WebAzureProject-Terraform"): network.SubnetsClient#Delete: Failure sending request: StatusCode=400 -- Original Error: Code="InUseSubnetCannotBeDeleted" Message="Subnet WebAzureProject-Terraform-subnet is in use by /subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal and cannot be deleted. In order to delete the subnet, delete all the resources within the subnet. See aka.ms/deletesubnet." Details=[]



Error: Error Creating/Updating Subnet "2-subnet" (Virtual Network "WebAzureProject-Terraform-network" / Resource Group "WebAzureProject-Terraform"): network.SubnetsClient#CreateOrUpdate: Failure sending request: StatusCode=400 -- Original Error: Code="NetcfgInvalidSubnet" Message="Subnet '2-subnet' is not valid in virtual network 'WebAzureProject-Terraform-network'." Details=[]

  on main.tf line 41, in resource "azurerm_subnet" "main":
  41: resource "azurerm_subnet" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?                       1 ↵  1101  22:28:19
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_subnet.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_network_interface.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_interface_backend_address_pool_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_linux_virtual_machine.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_availability_set.main will be created
  + resource "azurerm_availability_set" "main" {
      + id                           = (known after apply)
      + location                     = "eastus"
      + managed                      = true
      + name                         = "WebAzureProject-Terraform-VMset"
      + platform_fault_domain_count  = 3
      + platform_update_domain_count = 5
      + resource_group_name          = "WebAzureProject-Terraform"
      + tags                         = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"
      + tags                 = {
          + "udacity-dws" = "Production"
        }

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = (known after apply)
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "1-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "2-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_managed_disk.main[0] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "1-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_managed_disk.main[1] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "2-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_security_group.main will be created
  + resource "azurerm_network_security_group" "main" {
      + id                  = (known after apply)
      + location            = "eastus"
      + name                = "WebAzureProject-Terraform-network-security_group"
      + resource_group_name = "WebAzureProject-Terraform"
      + security_rule       = (known after apply)
      + tags                = {
          + "udacity-dws" = "VirtualNetwork"
        }
    }

  # azurerm_network_security_rule.rule1 will be created
  + resource "azurerm_network_security_rule" "rule1" {
      + access                      = "Allow"
      + description                 = "Allow access to other VMs on the subnet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "3389"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-allowVM"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 101
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_network_security_rule.rule2 will be created
  + resource "azurerm_network_security_rule" "rule2" {
      + access                      = "Deny"
      + description                 = "Deny direct access from the internet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "22"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-denyDirectAccess"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 100
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_public_ip.main will be created
  + resource "azurerm_public_ip" "main" {
      + allocation_method       = "Static"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "eastus"
      + name                    = "WebAzureProject-Terraform-PublicIp1"
      + resource_group_name     = "WebAzureProject-Terraform"
      + sku                     = "Basic"
      + tags                    = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_resource_group.main will be created
  + resource "azurerm_resource_group" "main" {
      + id       = (known after apply)
      + location = "eastus"
      + name     = "WebAzureProject-Terraform"
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_machine_data_disk_attachment.example[0] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_machine_data_disk_attachment.example[1] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + tags                  = {
          + "udacity-dws" = "Production"
        }
      + vm_protection_enabled = false
    }

Plan: 22 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 81, in resource "azurerm_lb_backend_address_pool" "main":
  81: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan"  
azurerm_resource_group.main: Creating...
azurerm_resource_group.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_network_security_group.main: Creating...
azurerm_public_ip.main: Creating...
azurerm_availability_set.main: Creating...
azurerm_virtual_network.main: Creating...
azurerm_managed_disk.main[1]: Creating...
azurerm_managed_disk.main[0]: Creating...
azurerm_availability_set.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_lb.main: Creating...
azurerm_managed_disk.main[1]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_managed_disk.main[0]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_lb.main: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_lb_backend_address_pool.main: Creating...
azurerm_virtual_network.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_network_security_group.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_subnet.main: Creating...
azurerm_network_security_rule.rule1: Creating...
azurerm_network_security_rule.rule2: Creating...
azurerm_lb_backend_address_pool.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet.main: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet_network_security_group_association.main[1]: Creating...
azurerm_subnet_network_security_group_association.main[0]: Creating...
azurerm_network_interface.main[0]: Creating...
azurerm_network_interface.main[1]: Creating...
azurerm_network_interface.main[0]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface.main[1]: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface_backend_address_pool_association.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creating...
azurerm_linux_virtual_machine.main[1]: Creating...
azurerm_linux_virtual_machine.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[0]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_security_rule.rule1: Still creating... [10s elapsed]
azurerm_network_security_rule.rule2: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Creation complete after 11s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [10s elapsed]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [10s elapsed]
azurerm_network_security_rule.rule2: Still creating... [20s elapsed]
azurerm_network_security_rule.rule2: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_linux_virtual_machine.main[1]: Still creating... [21s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [31s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [41s elapsed]
azurerm_linux_virtual_machine.main[1]: Creation complete after 48s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]

Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_network_interface_backend_address_pool_association" for more information.

  on main.tf line 88, in resource "azurerm_network_interface_backend_address_pool_association" "main":
  88: resource "azurerm_network_interface_backend_address_pool_association" "main" {



Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_subnet_network_security_group_association" for more information.

  on main.tf line 141, in resource "azurerm_subnet_network_security_group_association" "main":
 141: resource "azurerm_subnet_network_security_group_association" "main" {



Error: waiting for creation of Linux Virtual Machine "1-vm" (Resource Group "WebAzureProject-Terraform"): Code="NetworkingInternalOperationError" Message="An unexpected error occured while processing the network profile of the VM. Please retry later."

  on main.tf line 171, in resource "azurerm_linux_virtual_machine" "main":
 171: resource "azurerm_linux_virtual_machine" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform destroy    1 ↵  1103  22:40:44

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # azurerm_availability_set.main will be destroyed
  - resource "azurerm_availability_set" "main" {
      - id                           = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset" -> null
      - location                     = "eastus" -> null
      - managed                      = true -> null
      - name                         = "WebAzureProject-Terraform-VMset" -> null
      - platform_fault_domain_count  = 3 -> null
      - platform_update_domain_count = 5 -> null
      - resource_group_name          = "WebAzureProject-Terraform" -> null
      - tags                         = {
          - "udacity-dws" = "Production"
        } -> null
    }

  # azurerm_lb.main will be destroyed
  - resource "azurerm_lb" "main" {
      - id                   = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer" -> null
      - location             = "eastus" -> null
      - name                 = "WebAzureProject-Terraform-LoadBalancer" -> null
      - private_ip_addresses = [] -> null
      - resource_group_name  = "WebAzureProject-Terraform" -> null
      - sku                  = "Basic" -> null
      - tags                 = {
          - "udacity-dws" = "Production"
        } -> null

      - frontend_ip_configuration {
          - id                            = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/frontendIPConfigurations/WebAzureProject-Terraform-frontendIpConfiguration" -> null
          - inbound_nat_rules             = [] -> null
          - load_balancer_rules           = [] -> null
          - name                          = "WebAzureProject-Terraform-frontendIpConfiguration" -> null
          - outbound_rules                = [] -> null
          - private_ip_address_allocation = "Dynamic" -> null
          - private_ip_address_version    = "IPv4" -> null
          - public_ip_address_id          = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1" -> null
        }
    }

  # azurerm_lb_backend_address_pool.main will be destroyed
  - resource "azurerm_lb_backend_address_pool" "main" {
      - backend_ip_configurations = [] -> null
      - id                        = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool" -> null
      - load_balancing_rules      = [] -> null
      - loadbalancer_id           = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer" -> null
      - name                      = "WebAzureProject-Terraform-BackEndAddressPool" -> null
      - outbound_rules            = [] -> null
      - resource_group_name       = "WebAzureProject-Terraform" -> null
    }

  # azurerm_linux_virtual_machine.main[1] will be destroyed
  - resource "azurerm_linux_virtual_machine" "main" {
      - admin_password                  = (sensitive value)
      - admin_username                  = "WebAzure" -> null
      - allow_extension_operations      = true -> null
      - availability_set_id             = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WEBAZUREPROJECT-TERRAFORM-VMSET" -> null
      - computer_name                   = "2-vm" -> null
      - disable_password_authentication = false -> null
      - encryption_at_host_enabled      = false -> null
      - extensions_time_budget          = "PT1H30M" -> null
      - id                              = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm" -> null
      - location                        = "eastus" -> null
      - max_bid_price                   = -1 -> null
      - name                            = "2-vm" -> null
      - network_interface_ids           = [
          - "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic",
        ] -> null
      - priority                        = "Regular" -> null
      - private_ip_address              = "10.0.1.4" -> null
      - private_ip_addresses            = [
          - "10.0.1.4",
        ] -> null
      - provision_vm_agent              = true -> null
      - public_ip_addresses             = [] -> null
      - resource_group_name             = "WebAzureProject-Terraform" -> null
      - size                            = "Standard_B1s" -> null
      - source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm" -> null
      - tags                            = {
          - "udacity-dws" = "vm"
        } -> null
      - virtual_machine_id              = "b90b6111-6400-4ea2-a508-6164632e45f5" -> null

      - os_disk {
          - caching                   = "ReadWrite" -> null
          - disk_size_gb              = 30 -> null
          - name                      = "2-vm_disk1_9c634fe3187d4e83827a9ed2b6c5ae05" -> null
          - storage_account_type      = "Standard_LRS" -> null
          - write_accelerator_enabled = false -> null
        }
    }

  # azurerm_managed_disk.main[0] will be destroyed
  - resource "azurerm_managed_disk" "main" {
      - create_option        = "Empty" -> null
      - disk_iops_read_write = 500 -> null
      - disk_mbps_read_write = 60 -> null
      - disk_size_gb         = 1 -> null
      - id                   = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks" -> null
      - location             = "eastus" -> null
      - name                 = "1-ManagedDisks" -> null
      - resource_group_name  = "WebAzureProject-Terraform" -> null
      - storage_account_type = "Standard_LRS" -> null
      - tags                 = {
          - "udacity-dws" = "staging"
        } -> null
    }

  # azurerm_managed_disk.main[1] will be destroyed
  - resource "azurerm_managed_disk" "main" {
      - create_option        = "Empty" -> null
      - disk_iops_read_write = 500 -> null
      - disk_mbps_read_write = 60 -> null
      - disk_size_gb         = 1 -> null
      - id                   = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks" -> null
      - location             = "eastus" -> null
      - name                 = "2-ManagedDisks" -> null
      - resource_group_name  = "WebAzureProject-Terraform" -> null
      - storage_account_type = "Standard_LRS" -> null
      - tags                 = {
          - "udacity-dws" = "staging"
        } -> null
    }

  # azurerm_network_interface.main[0] will be destroyed
  - resource "azurerm_network_interface" "main" {
      - applied_dns_servers           = [] -> null
      - dns_servers                   = [] -> null
      - enable_accelerated_networking = false -> null
      - enable_ip_forwarding          = false -> null
      - id                            = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic" -> null
      - internal_domain_name_suffix   = "j11jhqbfqf4ezli3jqmsfntxab.bx.internal.cloudapp.net" -> null
      - location                      = "eastus" -> null
      - name                          = "WebAzureProject-Terraform-nic" -> null
      - private_ip_address            = "10.0.1.4" -> null
      - private_ip_addresses          = [
          - "10.0.1.4",
        ] -> null
      - resource_group_name           = "WebAzureProject-Terraform" -> null
      - tags                          = {
          - "udacity-dws" = "Production"
        } -> null

      - ip_configuration {
          - name                          = "internal" -> null
          - primary                       = true -> null
          - private_ip_address            = "10.0.1.4" -> null
          - private_ip_address_allocation = "Dynamic" -> null
          - private_ip_address_version    = "IPv4" -> null
          - subnet_id                     = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> null
        }
    }

  # azurerm_network_interface.main[1] will be destroyed
  - resource "azurerm_network_interface" "main" {
      - applied_dns_servers           = [] -> null
      - dns_servers                   = [] -> null
      - enable_accelerated_networking = false -> null
      - enable_ip_forwarding          = false -> null
      - id                            = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic" -> null
      - internal_domain_name_suffix   = "j11jhqbfqf4ezli3jqmsfntxab.bx.internal.cloudapp.net" -> null
      - location                      = "eastus" -> null
      - name                          = "WebAzureProject-Terraform-nic" -> null
      - private_ip_address            = "10.0.1.4" -> null
      - private_ip_addresses          = [
          - "10.0.1.4",
        ] -> null
      - resource_group_name           = "WebAzureProject-Terraform" -> null
      - tags                          = {
          - "udacity-dws" = "Production"
        } -> null

      - ip_configuration {
          - name                          = "internal" -> null
          - primary                       = true -> null
          - private_ip_address            = "10.0.1.4" -> null
          - private_ip_address_allocation = "Dynamic" -> null
          - private_ip_address_version    = "IPv4" -> null
          - subnet_id                     = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> null
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be destroyed
  - resource "azurerm_network_interface_backend_address_pool_association" "main" {
      - backend_address_pool_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool" -> null
      - id                      = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool" -> null
      - ip_configuration_name   = "internal" -> null
      - network_interface_id    = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic" -> null
    }

  # azurerm_network_security_group.main will be destroyed
  - resource "azurerm_network_security_group" "main" {
      - id                  = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group" -> null
      - location            = "eastus" -> null
      - name                = "WebAzureProject-Terraform-network-security_group" -> null
      - resource_group_name = "WebAzureProject-Terraform" -> null
      - security_rule       = [] -> null
      - tags                = {
          - "udacity-dws" = "VirtualNetwork"
        } -> null
    }

  # azurerm_network_security_rule.rule1 will be destroyed
  - resource "azurerm_network_security_rule" "rule1" {
      - access                      = "Allow" -> null
      - description                 = "Allow access to other VMs on the subnet." -> null
      - destination_address_prefix  = "VirtualNetwork" -> null
      - destination_port_range      = "3389" -> null
      - direction                   = "Inbound" -> null
      - id                          = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM" -> null
      - name                        = "AzureSecurityGroup-allowVM" -> null
      - network_security_group_name = "WebAzureProject-Terraform-network-security_group" -> null
      - priority                    = 101 -> null
      - protocol                    = "Tcp" -> null
      - resource_group_name         = "WebAzureProject-Terraform" -> null
      - source_address_prefix       = "VirtualNetwork" -> null
      - source_port_range           = "*" -> null
    }

  # azurerm_network_security_rule.rule2 will be destroyed
  - resource "azurerm_network_security_rule" "rule2" {
      - access                      = "Deny" -> null
      - description                 = "Deny direct access from the internet." -> null
      - destination_address_prefix  = "VirtualNetwork" -> null
      - destination_port_range      = "22" -> null
      - direction                   = "Inbound" -> null
      - id                          = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess" -> null
      - name                        = "AzureSecurityGroup-denyDirectAccess" -> null
      - network_security_group_name = "WebAzureProject-Terraform-network-security_group" -> null
      - priority                    = 100 -> null
      - protocol                    = "Tcp" -> null
      - resource_group_name         = "WebAzureProject-Terraform" -> null
      - source_address_prefix       = "VirtualNetwork" -> null
      - source_port_range           = "*" -> null
    }

  # azurerm_public_ip.main will be destroyed
  - resource "azurerm_public_ip" "main" {
      - allocation_method       = "Static" -> null
      - id                      = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1" -> null
      - idle_timeout_in_minutes = 4 -> null
      - ip_address              = "168.62.185.242" -> null
      - ip_version              = "IPv4" -> null
      - location                = "eastus" -> null
      - name                    = "WebAzureProject-Terraform-PublicIp1" -> null
      - resource_group_name     = "WebAzureProject-Terraform" -> null
      - sku                     = "Basic" -> null
      - tags                    = {
          - "udacity-dws" = "Production"
        } -> null
    }

  # azurerm_resource_group.main will be destroyed
  - resource "azurerm_resource_group" "main" {
      - id       = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform" -> null
      - location = "eastus" -> null
      - name     = "WebAzureProject-Terraform" -> null
    }

  # azurerm_subnet.main will be destroyed
  - resource "azurerm_subnet" "main" {
      - address_prefix                                 = "10.0.1.0/24" -> null
      - address_prefixes                               = [
          - "10.0.1.0/24",
        ] -> null
      - enforce_private_link_endpoint_network_policies = false -> null
      - enforce_private_link_service_network_policies  = false -> null
      - id                                             = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> null
      - name                                           = "WebAzureProject-Terraform-subnet" -> null
      - resource_group_name                            = "WebAzureProject-Terraform" -> null
      - virtual_network_name                           = "WebAzureProject-Terraform-network" -> null
    }

  # azurerm_subnet_network_security_group_association.main[1] will be destroyed
  - resource "azurerm_subnet_network_security_group_association" "main" {
      - id                        = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> null
      - network_security_group_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group" -> null
      - subnet_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> null
    }

  # azurerm_virtual_network.main will be destroyed
  - resource "azurerm_virtual_network" "main" {
      - address_space         = [
          - "10.0.0.0/16",
        ] -> null
      - guid                  = "c093f64e-8125-4c7c-ad1d-4c1922b67701" -> null
      - id                    = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network" -> null
      - location              = "eastus" -> null
      - name                  = "WebAzureProject-Terraform-network" -> null
      - resource_group_name   = "WebAzureProject-Terraform" -> null
      - subnet                = [] -> null
      - tags                  = {
          - "udacity-dws" = "Production"
        } -> null
      - vm_protection_enabled = false -> null
    }

Plan: 0 to add, 0 to change, 17 to destroy.


Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 81, in resource "azurerm_lb_backend_address_pool" "main":
  81: resource "azurerm_lb_backend_address_pool" "main" {


Do you really want to destroy all resources?
  Terraform will destroy all your managed infrastructure, as shown above.
  There is no undo. Only 'yes' will be accepted to confirm.

  Enter a value: yes

azurerm_subnet_network_security_group_association.main[1]: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_interface_backend_address_pool_association.main[0]: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_security_rule.rule2: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_managed_disk.main[1]: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_network_security_rule.rule1: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_managed_disk.main[0]: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_linux_virtual_machine.main[1]: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]
azurerm_managed_disk.main[1]: Destruction complete after 0s
azurerm_managed_disk.main[0]: Destruction complete after 1s
azurerm_network_interface_backend_address_pool_association.main[0]: Still destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-...reProject-Terraform-BackEndAddressPool, 10s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Still destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-...bnets/WebAzureProject-Terraform-subnet, 10s elapsed]
azurerm_network_security_rule.rule2: Still destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-...es/AzureSecurityGroup-denyDirectAccess, 10s elapsed]
azurerm_network_security_rule.rule1: Still destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-...curityRules/AzureSecurityGroup-allowVM, 10s elapsed]
azurerm_linux_virtual_machine.main[1]: Still destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-...Microsoft.Compute/virtualMachines/2-vm, 10s elapsed]
azurerm_network_security_rule.rule2: Destruction complete after 10s
azurerm_subnet_network_security_group_association.main[1]: Still destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-...bnets/WebAzureProject-Terraform-subnet, 20s elapsed]
azurerm_network_security_rule.rule1: Still destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-...curityRules/AzureSecurityGroup-allowVM, 20s elapsed]
azurerm_linux_virtual_machine.main[1]: Still destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-...Microsoft.Compute/virtualMachines/2-vm, 20s elapsed]
azurerm_network_security_rule.rule1: Destruction complete after 21s

Error: removing Network Security Group Association from Subnet "WebAzureProject-Terraform-subnet" (Virtual Network "WebAzureProject-Terraform-network" / Resource Group "WebAzureProject-Terraform"): network.SubnetsClient#CreateOrUpdate: Failure sending request: StatusCode=400 -- Original Error: Code="ReferencedResourceNotProvisioned" Message="Cannot proceed with operation because resource /subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal used by resource /subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet is not in Succeeded state. Resource is in Failed state and the last operation that updated/is updating the resource is PutNicOperation." Details=[]



Error: Error waiting for removal of Backend Address Pool Association for NIC "WebAzureProject-Terraform-nic" (Resource Group "WebAzureProject-Terraform"): Code="NetworkingInternalOperationError" Message="An unexpected error occured while processing the network profile of the VM. Please retry later." Details=[]



Error: waiting for deletion of Linux Virtual Machine "2-vm" (Resource Group "WebAzureProject-Terraform"): Code="NicInUse" Message="Network Interface WebAzureProject-Terraform-nic is used by existing resource /subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm. In order to delete the network interface, it must be dissociated from the resource. To learn more, see aka.ms/deletenic."


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az -h                1 ↵  1104  22:50:15

Group
    az

Subgroups:
    account                                   : Manage Azure subscription information.
    acr                                       : Manage private registries with Azure Container
                                                Registries.
    ad                                        : Manage Azure Active Directory Graph entities needed
                                                for Role Based Access Control.
    advisor                                   : Manage Azure Advisor.
    afd                             [Preview]
    aks                                       : Manage Azure Kubernetes Services.
    ams                                       : Manage Azure Media Services resources.
    apim                                      : Manage Azure API Management services.
    appconfig                                 : Manage App Configurations.
    appservice                                : Manage App Service plans.
    aro                                       : Manage Azure Red Hat OpenShift clusters.
    backup                          [Preview] : Manage Azure Backups.
    batch                                     : Manage Azure Batch.
    bicep                                     : Bicep CLI command group.
    billing                                   : Manage Azure Billing.
    bot                                       : Manage Microsoft Azure Bot Service.
    cache                                     : Commands to manage CLI objects cached using the
                                                `--defer` argument.
    cdn                                       : Manage Azure Content Delivery Networks (CDNs).
    cloud                                     : Manage registered Azure clouds.
    cognitiveservices                         : Manage Azure Cognitive Services accounts.
    config                     [Experimental] : Manage Azure CLI configuration.
    consumption                     [Preview] : Manage consumption of Azure resources.
    container                                 : Manage Azure Container Instances.
    cosmosdb                                  : Manage Azure Cosmos DB database accounts.
    databoxedge                     [Preview] : Support data box edge device and
                                                management.
    deployment                                : Manage Azure Resource Manager template deployment at
                                                subscription scope.
    deployment-scripts                        : Manage deployment scripts at subscription or
                                                resource group scope.
    deploymentmanager               [Preview] : Create and manage rollouts for your
                                                service.
    disk                                      : Manage Azure Managed Disks.
    disk-access                               : Manage disk access resources.
    disk-encryption-set                       : Disk Encryption Set resource.
    dla                             [Preview] : Manage Data Lake Analytics accounts, jobs,
                                                and catalogs.
    dls                             [Preview] : Manage Data Lake Store accounts and
                                                filesystems.
    dms                                       : Manage Azure Data Migration Service (DMS) instances.
    eventgrid                                 : Manage Azure Event Grid topics, domains, domain
                                                topics, system topics partner topics, event
                                                subscriptions, system topic event subscriptions and
                                                partner topic event subscriptions.
    eventhubs                                 : Manage Azure Event Hubs namespaces, eventhubs,
                                                consumergroups and geo recovery configurations -
                                                Alias.
    extension                                 : Manage and update CLI extensions.
    feature                                   : Manage resource provider features.
    functionapp                               : Manage function apps. To install the Azure Functions
                                                Core tools see https://github.com/Azure/azure-
                                                functions-core-tools.
    group                                     : Manage resource groups and template deployments.
    hdinsight                                 : Manage HDInsight resources.
    identity                                  : Managed Service Identities.
    image                                     : Manage custom virtual machine images.
    iot                                       : Manage Internet of Things (IoT) assets.
    keyvault                                  : Manage KeyVault keys, secrets, and certificates.
    kusto                                     : Manage Azure Kusto resources.
    lab                             [Preview] : Manage Azure DevTest Labs.
    local-context [Deprecated] [Experimental] : Manage Local Context.
    lock                                      : Manage Azure locks.
    managedapp                                : Manage template solutions provided and maintained by
                                                Independent Software Vendors (ISVs).
    managedservices                           : Manage the registration assignments and definitions
                                                in Azure.
    maps                                      : Manage Azure Maps.
    mariadb                                   : Manage Azure Database for MariaDB servers.
    monitor                                   : Manage the Azure Monitor Service.
    mysql                                     : Manage Azure Database for MySQL servers.
    netappfiles                               : Manage Azure NetApp Files (ANF) Resources.
    network                                   : Manage Azure Network resources.
    policy                                    : Manage resource policies.
    postgres                                  : Manage Azure Database for PostgreSQL servers.
    ppg                                       : Manage Proximity Placement Groups.
    provider                                  : Manage resource providers.
    redis                                     : Manage dedicated Redis caches for your Azure
                                                applications.
    relay                                     : Manage Azure Relay Service namespaces, WCF relays,
                                                hybrid connections, and rules.
    reservations                    [Preview] : Manage Azure Reservations.
    resource                                  : Manage Azure resources.
    role                                      : Manage user roles for access control with Azure
                                                Active Directory and service principals.
    search                                    : Manage Azure Search services, admin keys and query
                                                keys.
    security                        [Preview] : Manage your security posture with Azure
                                                Security Center.
    servicebus                                : Manage Azure Service Bus namespaces, queues, topics,
                                                subscriptions, rules and geo-disaster recovery
                                                configuration alias.
    sf                                        : Manage and administer Azure Service Fabric clusters.
    sig                                       : Manage shared image gallery.
    signalr                                   : Manage Azure SignalR Service.
    snapshot                                  : Manage point-in-time copies of managed disks, native
                                                blobs, or other snapshots.
    sql                                       : Manage Azure SQL Databases and Data Warehouses.
    sshkey                                    : Manage ssh public key with vm.
    staticwebapp                    [Preview] : Manage static apps.
    storage                                   : Manage Azure Cloud Storage resources.
    synapse                         [Preview] : Manage and operate Synapse Workspace, Spark
                                                Pool, SQL Pool.
    tag                                       : Tag Management on a resource.
    ts                              [Preview] : Manage template specs at subscription or
                                                resource group scope.
    vm                                        : Manage Linux or Windows virtual machines.
    vmss                                      : Manage groupings of virtual machines in an Azure
                                                Virtual Machine Scale Set (VMSS).
    webapp                                    : Manage web apps.

Commands:
    configure                                 : Manage Azure CLI configuration. This command is
                                                interactive.
    feedback                                  : Send feedback to the Azure CLI Team.
    find                                      : I'm an AI robot, my advice is based on our Azure
                                                documentation as well as the usage patterns of Azure
                                                CLI and Azure ARM users. Using me improves Azure
                                                products and documentation.
    interactive                     [Preview] : Start interactive mode. Installs the
                                                Interactive extension if not installed already.
    login                                     : Log in to Azure.
    logout                                    : Log out to remove access to Azure subscriptions.
    rest                                      : Invoke a custom request.
    upgrade                         [Preview] : Upgrade Azure CLI and extensions.
    version                                   : Show the versions of Azure CLI modules and
                                                extensions in JSON format by default or format
                                                configured by --output.

For more specific examples, use: az find "az "

Please let us know how we are doing: https://aka.ms/azureclihats
and let us know if you're interested in trying out our newest features: https://aka.ms/CLIUXstudy
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az resources -h        ✔  1105  22:51:55
'resources' is misspelled or not recognized by the system.
Did you mean 'resource' ?

TRY THIS:
az resource list
List resources. (autogenerated)

https://docs.microsoft.com/en-US/cli/azure/resource#az_resource_list
Read more about the command in reference docs
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az resource -h       2 ↵  1106  22:52:42

Group
    az resource : Manage Azure resources.

Subgroups:
    link          : Manage links between resources.
    lock          : Manage Azure resource level locks.

Commands:
    create        : Create a resource.
    delete        : Delete a resource.
    invoke-action : Invoke an action on the resource.
    list          : List resources.
    move          : Moves resources from one resource group to another(can be under different
                    subscription).
    show          : Get the details of a resource.
    tag           : Tag a resource.
    update        : Update a resource.
    wait          : Place the CLI in a waiting state until a condition of a resources is met.

For more specific examples, use: az find "az resource"

Please let us know how we are doing: https://aka.ms/azureclihats
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az group -h            ✔  1107  22:52:47

Group
    az group : Manage resource groups and template deployments.

Subgroups:
    lock   : Manage Azure resource group locks.

Commands:
    create : Create a new resource group.
    delete : Delete a resource group.
    exists : Check if a resource group exists.
    export : Captures a resource group as a template.
    list   : List resource groups.
    show   : Gets a resource group.
    update : Update a resource group.
    wait   : Place the CLI in a waiting state until a condition of the resource group is met.

For more specific examples, use: az find "az group"

Please let us know how we are doing: https://aka.ms/azureclihats
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az group list          ✔  1108  22:58:08
[
  {
    "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject",
    "location": "eastus",
    "managedBy": null,
    "name": "WebAzureProject",
    "properties": {
      "provisioningState": "Succeeded"
    },
    "tags": {
      "tags": "udacity-dws",
      "udacity-dws": ""
    },
    "type": "Microsoft.Resources/resourceGroups"
  },
  {
    "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/NetworkWatcherRG",
    "location": "eastus",
    "managedBy": null,
    "name": "NetworkWatcherRG",
    "properties": {
      "provisioningState": "Succeeded"
    },
    "tags": null,
    "type": "Microsoft.Resources/resourceGroups"
  }
]
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_subnet.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet_network_security_group_association.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_interface.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic]
azurerm_network_interface_backend_address_pool_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_linux_virtual_machine.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_availability_set.main will be created
  + resource "azurerm_availability_set" "main" {
      + id                           = (known after apply)
      + location                     = "eastus"
      + managed                      = true
      + name                         = "WebAzureProject-Terraform-VMset"
      + platform_fault_domain_count  = 3
      + platform_update_domain_count = 5
      + resource_group_name          = "WebAzureProject-Terraform"
      + tags                         = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"
      + tags                 = {
          + "udacity-dws" = "Production"
        }

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = (known after apply)
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "1-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "2-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_managed_disk.main[0] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "1-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_managed_disk.main[1] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "2-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic-1"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic-2"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_security_group.main will be created
  + resource "azurerm_network_security_group" "main" {
      + id                  = (known after apply)
      + location            = "eastus"
      + name                = "WebAzureProject-Terraform-network-security_group"
      + resource_group_name = "WebAzureProject-Terraform"
      + security_rule       = (known after apply)
      + tags                = {
          + "udacity-dws" = "VirtualNetwork"
        }
    }

  # azurerm_network_security_rule.rule1 will be created
  + resource "azurerm_network_security_rule" "rule1" {
      + access                      = "Allow"
      + description                 = "Allow access to other VMs on the subnet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "3389"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-allowVM"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 101
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_network_security_rule.rule2 will be created
  + resource "azurerm_network_security_rule" "rule2" {
      + access                      = "Deny"
      + description                 = "Deny direct access from the internet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "22"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-denyDirectAccess"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 100
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_public_ip.main will be created
  + resource "azurerm_public_ip" "main" {
      + allocation_method       = "Static"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "eastus"
      + name                    = "WebAzureProject-Terraform-PublicIp1"
      + resource_group_name     = "WebAzureProject-Terraform"
      + sku                     = "Basic"
      + tags                    = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_resource_group.main will be created
  + resource "azurerm_resource_group" "main" {
      + id       = (known after apply)
      + location = "eastus"
      + name     = "WebAzureProject-Terraform"
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_machine_data_disk_attachment.example[0] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_machine_data_disk_attachment.example[1] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + tags                  = {
          + "udacity-dws" = "Production"
        }
      + vm_protection_enabled = false
    }

Plan: 22 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 81, in resource "azurerm_lb_backend_address_pool" "main":
  81: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  terraform apply "solution.plan" 
azurerm_resource_group.main: Creating...
azurerm_resource_group.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_network_security_group.main: Creating...
azurerm_availability_set.main: Creating...
azurerm_virtual_network.main: Creating...
azurerm_public_ip.main: Creating...
azurerm_managed_disk.main[0]: Creating...
azurerm_managed_disk.main[1]: Creating...
azurerm_availability_set.main: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_lb.main: Creating...
azurerm_managed_disk.main[0]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_managed_disk.main[1]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_lb.main: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_lb_backend_address_pool.main: Creating...
azurerm_network_security_group.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_virtual_network.main: Creation complete after 6s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_subnet.main: Creating...
azurerm_network_security_rule.rule2: Creating...
azurerm_network_security_rule.rule1: Creating...
azurerm_lb_backend_address_pool.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet.main: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet_network_security_group_association.main[0]: Creating...
azurerm_subnet_network_security_group_association.main[1]: Creating...
azurerm_network_interface.main[0]: Creating...
azurerm_network_interface.main[1]: Creating...
azurerm_network_interface.main[0]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1]
azurerm_network_interface.main[1]: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2]
azurerm_network_interface_backend_address_pool_association.main[1]: Creating...
azurerm_network_interface_backend_address_pool_association.main[0]: Creating...
azurerm_linux_virtual_machine.main[0]: Creating...
azurerm_linux_virtual_machine.main[1]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_interface_backend_address_pool_association.main[0]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_security_rule.rule2: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Creation complete after 11s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [10s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [10s elapsed]
azurerm_network_security_rule.rule2: Still creating... [20s elapsed]
azurerm_network_security_rule.rule2: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[0]: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_linux_virtual_machine.main[0]: Still creating... [20s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [20s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [30s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [30s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [40s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [40s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [50s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [50s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [1m0s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m0s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m10s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [1m10s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m20s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [1m20s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m30s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [1m30s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [1m40s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m40s elapsed]
azurerm_linux_virtual_machine.main[1]: Creation complete after 1m47s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]
azurerm_linux_virtual_machine.main[0]: Creation complete after 1m48s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm]
azurerm_virtual_machine_data_disk_attachment.example[1]: Creating...
azurerm_virtual_machine_data_disk_attachment.example[0]: Creating...
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [10s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [10s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [20s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [20s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [30s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [30s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [40s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [40s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [50s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [50s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [1m0s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [1m0s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Creation complete after 1m1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm/dataDisks/1-ManagedDisks]
azurerm_virtual_machine_data_disk_attachment.example[1]: Creation complete after 1m1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm/dataDisks/2-ManagedDisks]

Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_subnet_network_security_group_association" for more information.

  on main.tf line 141, in resource "azurerm_subnet_network_security_group_association" "main":
 141: resource "azurerm_subnet_network_security_group_association" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az group -h   

Group
    az group : Manage resource groups and template deployments.

Subgroups:
    lock   : Manage Azure resource group locks.

Commands:
    create : Create a new resource group.
    delete : Delete a resource group.
    exists : Check if a resource group exists.
    export : Captures a resource group as a template.
    list   : List resource groups.
    show   : Gets a resource group.
    update : Update a resource group.
    wait   : Place the CLI in a waiting state until a condition of the resource group is met.

For more specific examples, use: az find "az group"

Please let us know how we are doing: https://aka.ms/azureclihats
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az group delete -h

Command
    az group delete : Delete a resource group.

Arguments
    --name --resource-group -g -n [Required] : Name of resource group. You can configure the default
                                               group using `az configure --defaults group=<name>`.
    --no-wait                                : Do not wait for the long-running operation to finish.
    --yes -y                                 : Do not prompt for confirmation.

Global Arguments
    --debug                                  : Increase logging verbosity to show all debug logs.
    --help -h                                : Show this help message and exit.
    --only-show-errors                       : Only show errors, suppressing warnings.
    --output -o                              : Output format.  Allowed values: json, jsonc, none,
                                               table, tsv, yaml, yamlc.  Default: json.
    --query                                  : JMESPath query string. See http://jmespath.org/ for
                                               more information and examples.
    --subscription                           : Name or ID of subscription. You can configure the
                                               default subscription using `az account set -s
                                               NAME_OR_ID`.
    --verbose                                : Increase logging verbosity. Use --debug for full
                                               debug logs.

Examples
    Delete a resource group.
        az group delete -n MyResourceGroup


For more specific examples, use: az find "az group delete"

Please let us know how we are doing: https://aka.ms/azureclihats
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ● ?  az group delete -gWebAzureProject-Terraform
Are you sure you want to perform this operation? (y/n): y
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ✚ ●  az group list    
[
  {
    "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject",
    "location": "eastus",
    "managedBy": null,
    "name": "WebAzureProject",
    "properties": {
      "provisioningState": "Succeeded"
    },
    "tags": {
      "tags": "udacity-dws",
      "udacity-dws": ""
    },
    "type": "Microsoft.Resources/resourceGroups"
  },
  {
    "id": "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/NetworkWatcherRG",
    "location": "eastus",
    "managedBy": null,
    "name": "NetworkWatcherRG",
    "properties": {
      "provisioningState": "Succeeded"
    },
    "tags": null,
    "type": "Microsoft.Resources/resourceGroups"
  }
]
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master  az group delete -n NetworkWatcherRG
Are you sure you want to perform this operation? (y/n): y
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master  terraform plan -out solution.plan

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 81, in resource "azurerm_lb_backend_address_pool" "main":
  81: resource "azurerm_lb_backend_address_pool" "main" {



Error: Reference to undeclared resource

  on main.tf line 209, in resource "azurerm_dev_test_global_vm_shutdown_schedule" "main":
 209:   virtual_machine_id = azurerm_virtual_machine.main[count.index].id

A managed resource "azurerm_virtual_machine" "main" has not been declared in
the root module.

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master  terraform plan -out solution.plan  

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 81, in resource "azurerm_lb_backend_address_pool" "main":
  81: resource "azurerm_lb_backend_address_pool" "main" {



Error: Reference to undeclared resource

  on main.tf line 209, in resource "azurerm_dev_test_global_vm_shutdown_schedule" "main":
 209:   virtual_machine_id = aazurerm_linux_virtual_machine.main[count.index].id

A managed resource "aazurerm_linux_virtual_machine" "main" has not been
declared in the root module.

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_subnet.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet_network_security_group_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_interface.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1]
azurerm_network_interface.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2]
azurerm_network_interface_backend_address_pool_association.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_interface_backend_address_pool_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_linux_virtual_machine.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]
azurerm_linux_virtual_machine.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm]
azurerm_virtual_machine_data_disk_attachment.example[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm/dataDisks/2-ManagedDisks]
azurerm_virtual_machine_data_disk_attachment.example[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm/dataDisks/1-ManagedDisks]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_availability_set.main will be created
  + resource "azurerm_availability_set" "main" {
      + id                           = (known after apply)
      + location                     = "eastus"
      + managed                      = true
      + name                         = "WebAzureProject-Terraform-VMset"
      + platform_fault_domain_count  = 3
      + platform_update_domain_count = 5
      + resource_group_name          = "WebAzureProject-Terraform"
      + tags                         = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_dev_test_global_vm_shutdown_schedule.main[0] will be created
  + resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {
      + daily_recurrence_time = "1700"
      + enabled               = true
      + id                    = (known after apply)
      + location              = "eastus"
      + timezone              = "Eastern Standard Time"
      + virtual_machine_id    = (known after apply)

      + notification_settings {
          + enabled         = false
          + time_in_minutes = 60
          + webhook_url     = "https://sample-webhook-url.example.com"
        }
    }

  # azurerm_dev_test_global_vm_shutdown_schedule.main[1] will be created
  + resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {
      + daily_recurrence_time = "1700"
      + enabled               = true
      + id                    = (known after apply)
      + location              = "eastus"
      + timezone              = "Eastern Standard Time"
      + virtual_machine_id    = (known after apply)

      + notification_settings {
          + enabled         = false
          + time_in_minutes = 60
          + webhook_url     = "https://sample-webhook-url.example.com"
        }
    }

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"
      + tags                 = {
          + "udacity-dws" = "Production"
        }

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = (known after apply)
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "1-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "2-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_managed_disk.main[0] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "1-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_managed_disk.main[1] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "2-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic-1"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic-2"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_security_group.main will be created
  + resource "azurerm_network_security_group" "main" {
      + id                  = (known after apply)
      + location            = "eastus"
      + name                = "WebAzureProject-Terraform-network-security_group"
      + resource_group_name = "WebAzureProject-Terraform"
      + security_rule       = (known after apply)
      + tags                = {
          + "udacity-dws" = "VirtualNetwork"
        }
    }

  # azurerm_network_security_rule.rule1 will be created
  + resource "azurerm_network_security_rule" "rule1" {
      + access                      = "Allow"
      + description                 = "Allow access to other VMs on the subnet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "3389"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-allowVM"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 101
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_network_security_rule.rule2 will be created
  + resource "azurerm_network_security_rule" "rule2" {
      + access                      = "Deny"
      + description                 = "Deny direct access from the internet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "22"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-denyDirectAccess"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 100
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_public_ip.main will be created
  + resource "azurerm_public_ip" "main" {
      + allocation_method       = "Static"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "eastus"
      + name                    = "WebAzureProject-Terraform-PublicIp1"
      + resource_group_name     = "WebAzureProject-Terraform"
      + sku                     = "Basic"
      + tags                    = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_resource_group.main will be created
  + resource "azurerm_resource_group" "main" {
      + id       = (known after apply)
      + location = "eastus"
      + name     = "WebAzureProject-Terraform"
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main[0] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_subnet_network_security_group_association.main[1] will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_machine_data_disk_attachment.example[0] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_machine_data_disk_attachment.example[1] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + tags                  = {
          + "udacity-dws" = "Production"
        }
      + vm_protection_enabled = false
    }

Plan: 24 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 81, in resource "azurerm_lb_backend_address_pool" "main":
  81: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  terraform apply "solution.plan"
azurerm_resource_group.main: Creating...
azurerm_resource_group.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_network_security_group.main: Creating...
azurerm_virtual_network.main: Creating...
azurerm_managed_disk.main[0]: Creating...
azurerm_public_ip.main: Creating...
azurerm_availability_set.main: Creating...
azurerm_managed_disk.main[1]: Creating...
azurerm_availability_set.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_lb.main: Creating...
azurerm_managed_disk.main[1]: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_managed_disk.main[0]: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_lb.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_lb_backend_address_pool.main: Creating...
azurerm_network_security_group.main: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_network_security_rule.rule2: Creating...
azurerm_network_security_rule.rule1: Creating...
azurerm_virtual_network.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_subnet.main: Creating...
azurerm_lb_backend_address_pool.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet.main: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet_network_security_group_association.main[1]: Creating...
azurerm_subnet_network_security_group_association.main[0]: Creating...
azurerm_network_interface.main[0]: Creating...
azurerm_network_interface.main[1]: Creating...
azurerm_network_interface.main[0]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1]
azurerm_network_interface.main[1]: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2]
azurerm_network_interface_backend_address_pool_association.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creating...
azurerm_linux_virtual_machine.main[1]: Creating...
azurerm_linux_virtual_machine.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_interface_backend_address_pool_association.main[0]: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_security_rule.rule1: Still creating... [10s elapsed]
azurerm_network_security_rule.rule2: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Creation complete after 11s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [10s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [10s elapsed]
azurerm_network_security_rule.rule2: Still creating... [20s elapsed]
azurerm_network_security_rule.rule2: Creation complete after 22s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_subnet_network_security_group_association.main[1]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[0]: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main[1]: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_linux_virtual_machine.main[0]: Still creating... [20s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [20s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [30s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [30s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [40s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [40s elapsed]
azurerm_linux_virtual_machine.main[0]: Creation complete after 48s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm]
azurerm_linux_virtual_machine.main[1]: Creation complete after 48s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]
azurerm_virtual_machine_data_disk_attachment.example[1]: Creating...
azurerm_dev_test_global_vm_shutdown_schedule.main[1]: Creating...
azurerm_virtual_machine_data_disk_attachment.example[0]: Creating...
azurerm_dev_test_global_vm_shutdown_schedule.main[0]: Creating...
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [10s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [10s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [20s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [20s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [30s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [30s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [40s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [40s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [50s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [50s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [1m0s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [1m0s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Creation complete after 1m1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm/dataDisks/2-ManagedDisks]
azurerm_virtual_machine_data_disk_attachment.example[0]: Creation complete after 1m1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm/dataDisks/1-ManagedDisks]

Error: A resource with the ID "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" already exists - to be managed via Terraform this resource needs to be imported into the State. Please see the resource documentation for "azurerm_subnet_network_security_group_association" for more information.

  on main.tf line 141, in resource "azurerm_subnet_network_security_group_association" "main":
 141: resource "azurerm_subnet_network_security_group_association" "main" {



Error: dtl.GlobalSchedulesClient#CreateOrUpdate: Failure responding to request: StatusCode=403 -- Original Error: autorest/azure: Service returned an error. Status=403 Code="RequestDisallowedByPolicy" Message="Resource 'shutdown-computevm-1-vm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="shutdown-computevm-1-vm" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 207, in resource "azurerm_dev_test_global_vm_shutdown_schedule" "main":
 207: resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {



Error: dtl.GlobalSchedulesClient#CreateOrUpdate: Failure responding to request: StatusCode=403 -- Original Error: autorest/azure: Service returned an error. Status=403 Code="RequestDisallowedByPolicy" Message="Resource 'shutdown-computevm-2-vm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1\"},\"policyDefinition\":{\"name\":\"tagging-policy1\",\"id\":\"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1\"}}]'." Target="shutdown-computevm-2-vm" AdditionalInfo=[{"info":{"evaluationDetails":{"evaluatedExpressions":[{"expression":"tags[udacity-dws]","expressionKind":"Field","operator":"Exists","path":"tags[udacity-dws]","result":"True","targetValue":"false"}]},"policyAssignmentDisplayName":"tagging-policy1","policyAssignmentId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyAssignments/tagging-policy1","policyAssignmentName":"tagging-policy1","policyAssignmentParameters":{"tagName":{"value":"udacity-dws"}},"policyAssignmentScope":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2","policyDefinitionDisplayName":"tagging-policy1","policyDefinitionEffect":"deny","policyDefinitionId":"/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/providers/Microsoft.Authorization/policyDefinitions/tagging-policy1","policyDefinitionName":"tagging-policy1"},"type":"PolicyViolation"}]

  on main.tf line 207, in resource "azurerm_dev_test_global_vm_shutdown_schedule" "main":
 207: resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  clear               1 ↵  1118  23:41:48

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_subnet.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_interface.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2]
azurerm_network_interface.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1]
azurerm_network_interface_backend_address_pool_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_interface_backend_address_pool_association.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_linux_virtual_machine.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm]
azurerm_linux_virtual_machine.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]
azurerm_virtual_machine_data_disk_attachment.example[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm/dataDisks/1-ManagedDisks]
azurerm_virtual_machine_data_disk_attachment.example[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm/dataDisks/2-ManagedDisks]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create
  - destroy

Terraform will perform the following actions:

  # azurerm_dev_test_global_vm_shutdown_schedule.main[0] will be created
  + resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {
      + daily_recurrence_time = "1700"
      + enabled               = true
      + id                    = (known after apply)
      + location              = "eastus"
      + tags                  = {
          + "udacity-dws" = "auto-shutdown"
        }
      + timezone              = "Eastern Standard Time"
      + virtual_machine_id    = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm"

      + notification_settings {
          + enabled         = false
          + time_in_minutes = 60
          + webhook_url     = "https://sample-webhook-url.example.com"
        }
    }

  # azurerm_dev_test_global_vm_shutdown_schedule.main[1] will be created
  + resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {
      + daily_recurrence_time = "1700"
      + enabled               = true
      + id                    = (known after apply)
      + location              = "eastus"
      + tags                  = {
          + "udacity-dws" = "auto-shutdown"
        }
      + timezone              = "Eastern Standard Time"
      + virtual_machine_id    = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm"

      + notification_settings {
          + enabled         = false
          + time_in_minutes = 60
          + webhook_url     = "https://sample-webhook-url.example.com"
        }
    }

  # azurerm_subnet_network_security_group_association.main will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group"
      + subnet_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet"
    }

  # azurerm_subnet_network_security_group_association.main[1] will be destroyed
  - resource "azurerm_subnet_network_security_group_association" "main" {
      - id                        = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> null
      - network_security_group_id = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group" -> null
      - subnet_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet" -> null
    }

Plan: 3 to add, 0 to change, 1 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 81, in resource "azurerm_lb_backend_address_pool" "main":
  81: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  az group delete -n WebAzureProject-Terraform

Are you sure you want to perform this operation? (y/n): y
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  az group delete -n NetworkWatcherRG

Are you sure you want to perform this operation? (y/n): y
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  terraform apply "solution.plan"
azurerm_subnet_network_security_group_association.main[1]: Destroying... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet_network_security_group_association.main: Creating...
azurerm_dev_test_global_vm_shutdown_schedule.main[1]: Creating...
azurerm_dev_test_global_vm_shutdown_schedule.main[0]: Creating...
azurerm_subnet_network_security_group_association.main[1]: Destruction complete after 0s

Error: subnet "WebAzureProject-Terraform-subnet" (Virtual Network "WebAzureProject-Terraform-network" / Resource Group "WebAzureProject-Terraform") was not found

  on main.tf line 141, in resource "azurerm_subnet_network_security_group_association" "main":
 141: resource "azurerm_subnet_network_security_group_association" "main" {



Error: dtl.GlobalSchedulesClient#CreateOrUpdate: Failure responding to request: StatusCode=404 -- Original Error: autorest/azure: Service returned an error. Status=404 Code="ResourceGroupNotFound" Message="Resource group 'WebAzureProject-Terraform' could not be found."

  on main.tf line 206, in resource "azurerm_dev_test_global_vm_shutdown_schedule" "main":
 206: resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {



Error: dtl.GlobalSchedulesClient#CreateOrUpdate: Failure responding to request: StatusCode=404 -- Original Error: autorest/azure: Service returned an error. Status=404 Code="ResourceGroupNotFound" Message="Resource group 'WebAzureProject-Terraform' could not be found."

  on main.tf line 206, in resource "azurerm_dev_test_global_vm_shutdown_schedule" "main":
 206: resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {


 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  terraform plan -out solution.plan
azurerm_resource_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_public_ip.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_virtual_network.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_availability_set.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_managed_disk.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_managed_disk.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_network_security_group.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_subnet.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_network_security_rule.rule1: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_network_security_rule.rule2: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_lb.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_network_interface.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1]
azurerm_network_interface.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2]
azurerm_lb_backend_address_pool.main: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_linux_virtual_machine.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm]
azurerm_linux_virtual_machine.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]
azurerm_network_interface_backend_address_pool_association.main[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_interface_backend_address_pool_association.main[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_virtual_machine_data_disk_attachment.example[0]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm/dataDisks/1-ManagedDisks]
azurerm_virtual_machine_data_disk_attachment.example[1]: Refreshing state... [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm/dataDisks/2-ManagedDisks]

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_availability_set.main will be created
  + resource "azurerm_availability_set" "main" {
      + id                           = (known after apply)
      + location                     = "eastus"
      + managed                      = true
      + name                         = "WebAzureProject-Terraform-VMset"
      + platform_fault_domain_count  = 3
      + platform_update_domain_count = 5
      + resource_group_name          = "WebAzureProject-Terraform"
      + tags                         = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_dev_test_global_vm_shutdown_schedule.main[0] will be created
  + resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {
      + daily_recurrence_time = "1700"
      + enabled               = true
      + id                    = (known after apply)
      + location              = "eastus"
      + tags                  = {
          + "udacity-dws" = "auto-shutdown"
        }
      + timezone              = "Eastern Standard Time"
      + virtual_machine_id    = (known after apply)

      + notification_settings {
          + enabled         = false
          + time_in_minutes = 60
          + webhook_url     = "https://sample-webhook-url.example.com"
        }
    }

  # azurerm_dev_test_global_vm_shutdown_schedule.main[1] will be created
  + resource "azurerm_dev_test_global_vm_shutdown_schedule" "main" {
      + daily_recurrence_time = "1700"
      + enabled               = true
      + id                    = (known after apply)
      + location              = "eastus"
      + tags                  = {
          + "udacity-dws" = "auto-shutdown"
        }
      + timezone              = "Eastern Standard Time"
      + virtual_machine_id    = (known after apply)

      + notification_settings {
          + enabled         = false
          + time_in_minutes = 60
          + webhook_url     = "https://sample-webhook-url.example.com"
        }
    }

  # azurerm_lb.main will be created
  + resource "azurerm_lb" "main" {
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "WebAzureProject-Terraform-LoadBalancer"
      + private_ip_address   = (known after apply)
      + private_ip_addresses = (known after apply)
      + resource_group_name  = "WebAzureProject-Terraform"
      + sku                  = "Basic"
      + tags                 = {
          + "udacity-dws" = "Production"
        }

      + frontend_ip_configuration {
          + id                            = (known after apply)
          + inbound_nat_rules             = (known after apply)
          + load_balancer_rules           = (known after apply)
          + name                          = "WebAzureProject-Terraform-frontendIpConfiguration"
          + outbound_rules                = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = (known after apply)
          + private_ip_address_version    = "IPv4"
          + public_ip_address_id          = (known after apply)
          + public_ip_prefix_id           = (known after apply)
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_lb_backend_address_pool.main will be created
  + resource "azurerm_lb_backend_address_pool" "main" {
      + backend_ip_configurations = (known after apply)
      + id                        = (known after apply)
      + load_balancing_rules      = (known after apply)
      + loadbalancer_id           = (known after apply)
      + name                      = "WebAzureProject-Terraform-BackEndAddressPool"
      + outbound_rules            = (known after apply)
      + resource_group_name       = "WebAzureProject-Terraform"
    }

  # azurerm_linux_virtual_machine.main[0] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "1-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_linux_virtual_machine.main[1] will be created
  + resource "azurerm_linux_virtual_machine" "main" {
      + admin_password                  = (sensitive value)
      + admin_username                  = "WebAzure"
      + allow_extension_operations      = true
      + availability_set_id             = (known after apply)
      + computer_name                   = (known after apply)
      + disable_password_authentication = false
      + extensions_time_budget          = "PT1H30M"
      + id                              = (known after apply)
      + location                        = "eastus"
      + max_bid_price                   = -1
      + name                            = "2-vm"
      + network_interface_ids           = (known after apply)
      + priority                        = "Regular"
      + private_ip_address              = (known after apply)
      + private_ip_addresses            = (known after apply)
      + provision_vm_agent              = true
      + public_ip_address               = (known after apply)
      + public_ip_addresses             = (known after apply)
      + resource_group_name             = "WebAzureProject-Terraform"
      + size                            = "Standard_B1s"
      + source_image_id                 = "/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject/providers/Microsoft.Compute/images/WebAzureProject-vm"
      + tags                            = {
          + "udacity-dws" = "vm"
        }
      + virtual_machine_id              = (known after apply)
      + zone                            = (known after apply)

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }
    }

  # azurerm_managed_disk.main[0] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "1-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_managed_disk.main[1] will be created
  + resource "azurerm_managed_disk" "main" {
      + create_option        = "Empty"
      + disk_iops_read_write = (known after apply)
      + disk_mbps_read_write = (known after apply)
      + disk_size_gb         = 1
      + id                   = (known after apply)
      + location             = "eastus"
      + name                 = "2-ManagedDisks"
      + resource_group_name  = "WebAzureProject-Terraform"
      + source_uri           = (known after apply)
      + storage_account_type = "Standard_LRS"
      + tags                 = {
          + "udacity-dws" = "staging"
        }
    }

  # azurerm_network_interface.main[0] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic-1"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface.main[1] will be created
  + resource "azurerm_network_interface" "main" {
      + applied_dns_servers           = (known after apply)
      + dns_servers                   = (known after apply)
      + enable_accelerated_networking = false
      + enable_ip_forwarding          = false
      + id                            = (known after apply)
      + internal_dns_name_label       = (known after apply)
      + internal_domain_name_suffix   = (known after apply)
      + location                      = "eastus"
      + mac_address                   = (known after apply)
      + name                          = "WebAzureProject-Terraform-nic-2"
      + private_ip_address            = (known after apply)
      + private_ip_addresses          = (known after apply)
      + resource_group_name           = "WebAzureProject-Terraform"
      + tags                          = {
          + "udacity-dws" = "Production"
        }
      + virtual_machine_id            = (known after apply)

      + ip_configuration {
          + name                          = "internal"
          + primary                       = (known after apply)
          + private_ip_address            = (known after apply)
          + private_ip_address_allocation = "dynamic"
          + private_ip_address_version    = "IPv4"
          + subnet_id                     = (known after apply)
        }
    }

  # azurerm_network_interface_backend_address_pool_association.main[0] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_interface_backend_address_pool_association.main[1] will be created
  + resource "azurerm_network_interface_backend_address_pool_association" "main" {
      + backend_address_pool_id = (known after apply)
      + id                      = (known after apply)
      + ip_configuration_name   = "internal"
      + network_interface_id    = (known after apply)
    }

  # azurerm_network_security_group.main will be created
  + resource "azurerm_network_security_group" "main" {
      + id                  = (known after apply)
      + location            = "eastus"
      + name                = "WebAzureProject-Terraform-network-security_group"
      + resource_group_name = "WebAzureProject-Terraform"
      + security_rule       = (known after apply)
      + tags                = {
          + "udacity-dws" = "VirtualNetwork"
        }
    }

  # azurerm_network_security_rule.rule1 will be created
  + resource "azurerm_network_security_rule" "rule1" {
      + access                      = "Allow"
      + description                 = "Allow access to other VMs on the subnet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "3389"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-allowVM"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 101
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_network_security_rule.rule2 will be created
  + resource "azurerm_network_security_rule" "rule2" {
      + access                      = "Deny"
      + description                 = "Deny direct access from the internet."
      + destination_address_prefix  = "VirtualNetwork"
      + destination_port_range      = "22"
      + direction                   = "Inbound"
      + id                          = (known after apply)
      + name                        = "AzureSecurityGroup-denyDirectAccess"
      + network_security_group_name = "WebAzureProject-Terraform-network-security_group"
      + priority                    = 100
      + protocol                    = "Tcp"
      + resource_group_name         = "WebAzureProject-Terraform"
      + source_address_prefix       = "VirtualNetwork"
      + source_port_range           = "*"
    }

  # azurerm_public_ip.main will be created
  + resource "azurerm_public_ip" "main" {
      + allocation_method       = "Static"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "eastus"
      + name                    = "WebAzureProject-Terraform-PublicIp1"
      + resource_group_name     = "WebAzureProject-Terraform"
      + sku                     = "Basic"
      + tags                    = {
          + "udacity-dws" = "Production"
        }
    }

  # azurerm_resource_group.main will be created
  + resource "azurerm_resource_group" "main" {
      + id       = (known after apply)
      + location = "eastus"
      + name     = "WebAzureProject-Terraform"
    }

  # azurerm_subnet.main will be created
  + resource "azurerm_subnet" "main" {
      + address_prefix                                 = (known after apply)
      + address_prefixes                               = [
          + "10.0.1.0/24",
        ]
      + enforce_private_link_endpoint_network_policies = false
      + enforce_private_link_service_network_policies  = false
      + id                                             = (known after apply)
      + name                                           = "WebAzureProject-Terraform-subnet"
      + resource_group_name                            = "WebAzureProject-Terraform"
      + virtual_network_name                           = "WebAzureProject-Terraform-network"
    }

  # azurerm_subnet_network_security_group_association.main will be created
  + resource "azurerm_subnet_network_security_group_association" "main" {
      + id                        = (known after apply)
      + network_security_group_id = (known after apply)
      + subnet_id                 = (known after apply)
    }

  # azurerm_virtual_machine_data_disk_attachment.example[0] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_machine_data_disk_attachment.example[1] will be created
  + resource "azurerm_virtual_machine_data_disk_attachment" "example" {
      + caching                   = "ReadWrite"
      + create_option             = "Attach"
      + id                        = (known after apply)
      + lun                       = 10
      + managed_disk_id           = (known after apply)
      + virtual_machine_id        = (known after apply)
      + write_accelerator_enabled = false
    }

  # azurerm_virtual_network.main will be created
  + resource "azurerm_virtual_network" "main" {
      + address_space         = [
          + "10.0.0.0/16",
        ]
      + guid                  = (known after apply)
      + id                    = (known after apply)
      + location              = "eastus"
      + name                  = "WebAzureProject-Terraform-network"
      + resource_group_name   = "WebAzureProject-Terraform"
      + subnet                = (known after apply)
      + tags                  = {
          + "udacity-dws" = "Production"
        }
      + vm_protection_enabled = false
    }

Plan: 23 to add, 0 to change, 0 to destroy.

Warning: "resource_group_name": [DEPRECATED] This field is no longer used and will be removed in the next major version of the Azure Provider

  on main.tf line 81, in resource "azurerm_lb_backend_address_pool" "main":
  81: resource "azurerm_lb_backend_address_pool" "main" {



------------------------------------------------------------------------

This plan was saved to: solution.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "solution.plan"

 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●  terraform apply "solution.plan"  
azurerm_resource_group.main: Creating...
azurerm_resource_group.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform]
azurerm_network_security_group.main: Creating...
azurerm_availability_set.main: Creating...
azurerm_public_ip.main: Creating...
azurerm_managed_disk.main[1]: Creating...
azurerm_virtual_network.main: Creating...
azurerm_managed_disk.main[0]: Creating...
azurerm_availability_set.main: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/availabilitySets/WebAzureProject-Terraform-VMset]
azurerm_public_ip.main: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/publicIPAddresses/WebAzureProject-Terraform-PublicIp1]
azurerm_lb.main: Creating...
azurerm_managed_disk.main[0]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/1-ManagedDisks]
azurerm_managed_disk.main[1]: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/disks/2-ManagedDisks]
azurerm_lb.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer]
azurerm_lb_backend_address_pool.main: Creating...
azurerm_network_security_group.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group]
azurerm_network_security_rule.rule2: Creating...
azurerm_network_security_rule.rule1: Creating...
azurerm_virtual_network.main: Creation complete after 5s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network]
azurerm_subnet.main: Creating...
azurerm_lb_backend_address_pool.main: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_subnet.main: Creation complete after 4s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_subnet_network_security_group_association.main: Creating...
azurerm_network_interface.main[1]: Creating...
azurerm_network_interface.main[0]: Creating...
azurerm_network_interface.main[1]: Creation complete after 2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2]
azurerm_network_interface.main[0]: Creation complete after 3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1]
azurerm_network_interface_backend_address_pool_association.main[0]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creating...
azurerm_linux_virtual_machine.main[0]: Creating...
azurerm_linux_virtual_machine.main[1]: Creating...
azurerm_network_interface_backend_address_pool_association.main[1]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-2/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_interface_backend_address_pool_association.main[0]: Creation complete after 1s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkInterfaces/WebAzureProject-Terraform-nic-1/ipConfigurations/internal|/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/loadBalancers/WebAzureProject-Terraform-LoadBalancer/backendAddressPools/WebAzureProject-Terraform-BackEndAddressPool]
azurerm_network_security_rule.rule2: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Still creating... [10s elapsed]
azurerm_network_security_rule.rule1: Creation complete after 11s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-allowVM]
azurerm_subnet_network_security_group_association.main: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [10s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [10s elapsed]
azurerm_network_security_rule.rule2: Still creating... [20s elapsed]
azurerm_network_security_rule.rule2: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/networkSecurityGroups/WebAzureProject-Terraform-network-security_group/securityRules/AzureSecurityGroup-denyDirectAccess]
azurerm_subnet_network_security_group_association.main: Still creating... [20s elapsed]
azurerm_subnet_network_security_group_association.main: Creation complete after 21s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Network/virtualNetworks/WebAzureProject-Terraform-network/subnets/WebAzureProject-Terraform-subnet]
azurerm_linux_virtual_machine.main[0]: Still creating... [20s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [20s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [30s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [30s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [40s elapsed]
azurerm_linux_virtual_machine.main[1]: Still creating... [40s elapsed]
azurerm_linux_virtual_machine.main[1]: Creation complete after 46s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm]
azurerm_linux_virtual_machine.main[0]: Still creating... [50s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m0s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m10s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m20s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m30s elapsed]
azurerm_linux_virtual_machine.main[0]: Still creating... [1m40s elapsed]
azurerm_linux_virtual_machine.main[0]: Creation complete after 1m46s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm]
azurerm_dev_test_global_vm_shutdown_schedule.main[1]: Creating...
azurerm_virtual_machine_data_disk_attachment.example[0]: Creating...
azurerm_virtual_machine_data_disk_attachment.example[1]: Creating...
azurerm_dev_test_global_vm_shutdown_schedule.main[0]: Creating...
azurerm_dev_test_global_vm_shutdown_schedule.main[0]: Creation complete after 6s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourcegroups/webazureproject-terraform/providers/microsoft.devtestlab/schedules/shutdown-computevm-1-vm]
azurerm_dev_test_global_vm_shutdown_schedule.main[1]: Creation complete after 6s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourcegroups/webazureproject-terraform/providers/microsoft.devtestlab/schedules/shutdown-computevm-2-vm]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [10s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [10s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [20s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [20s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [30s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [30s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [40s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [40s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [50s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [50s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[1]: Still creating... [1m0s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Still creating... [1m0s elapsed]
azurerm_virtual_machine_data_disk_attachment.example[0]: Creation complete after 1m2s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/1-vm/dataDisks/1-ManagedDisks]
azurerm_virtual_machine_data_disk_attachment.example[1]: Creation complete after 1m3s [id=/subscriptions/66f68753-1d99-469b-87b9-60a248f339a2/resourceGroups/WebAzureProject-Terraform/providers/Microsoft.Compute/virtualMachines/2-vm/dataDisks/2-ManagedDisks]

Apply complete! Resources: 23 added, 0 changed, 0 destroyed.

The state of your infrastructure has been saved to the path
below. This state is required to modify and destroy your
infrastructure, so keep it safe. To inspect the complete state
use the `terraform show` command.

State path: terraform.tfstate
 ~/Desktop/AzureTutorial/Projects/WebAzure/Infrastructure_Operations   master ●                        ✔  1125  00:03:52
